---
name: Mobile-First Layout Refactor
status: open
created: 2025-11-17T16:47:44Z
updated: 2025-11-17T16:58:05Z
github: https://github.com/varunisrani/sdjd2/issues/6
depends_on: [5]
parallel: false
conflicts_with: [7, 2, 3]
---

# Task 6: Mobile-First Layout Refactor

## Description

Restructure app/page.tsx for mobile-first responsive layout with bottom navigation. This task refactors the main application layout to provide optimal UX across all device sizes, starting from mobile and progressively enhancing for larger screens.

## Acceptance Criteria

- [x] Mobile (320-640px): Single-column layout, bottom nav hidden by default
- [x] Tablet (641-1024px): 2-column grid, side drawer navigation
- [x] Desktop (1025px+): Persistent sidebar (280px width), multi-column content
- [x] Touch targets minimum 44x44px on mobile
- [x] Smooth transitions between breakpoints

## Technical Details

### Files to Update
- `app/page.tsx` - Main layout component

### Implementation Scope

#### 1. Mobile Layout (320-640px - base styles)
```
┌──────────────────┐
│     Header       │  (sticky)
├──────────────────┤
│                  │
│   Main Content   │
│    (full width)  │
│                  │
├──────────────────┤
│  Bottom Nav      │  (sticky)
└──────────────────┘
```

Key characteristics:
- Single-column layout (100% width)
- Header sticky at top
- Bottom navigation sticky at bottom
- Content area: 100vw - scrollable
- Sidebar hidden
- All buttons/controls: 44x44px minimum
- Padding: 16px sides (--spacing-2)

#### 2. Tablet Layout (641-1024px - md: prefix)
```
┌──────────────────────────────┐
│        Header (sticky)       │
├────────┬──────────────────────┤
│ Drawer │                      │
│  Nav   │    Main Content      │
│(side)  │    (2-col grid)      │
│        │                      │
├────────┴──────────────────────┤
│      Bottom Nav (hidden)      │
└──────────────────────────────┘
```

Key characteristics:
- Sidebar drawer appears (240px width, collapsible)
- 2-column content grid
- Bottom navigation hidden (use top nav)
- Header remains sticky
- Drawer can be toggled for more content space

#### 3. Desktop Layout (1025px+ - lg: prefix)
```
┌──────────────────────────────────┐
│        Header (sticky)           │
├──────────┬──────────────────────┤
│          │                      │
│ Sidebar  │    Main Content      │
│ (280px)  │    (multi-column)    │
│ Sticky   │                      │
│          │                      │
├──────────┴──────────────────────┤
└──────────────────────────────────┘
```

Key characteristics:
- Persistent 280px sidebar (sticky)
- Multi-column content layout
- Bottom navigation hidden
- Full navigation in sidebar
- Header remains sticky
- Optimal reading width (content max-width ~900px)

#### 4. Navigation Component Structure

**Bottom Navigation (mobile only):**
- Icons with labels
- 5-6 main navigation items
- Fixed at bottom: `position: fixed; bottom: 0; width: 100%;`
- Min height: 64px (5 items × 12.8px each)
- Display: hidden on md: and above

**Sidebar Navigation (tablet/desktop):**
- Full menu with labels
- Collapsible sections
- Display: hidden on mobile
- Smooth transition between mobile/tablet/desktop

#### 5. Content Area Responsive Grid

Mobile (single column):
```css
grid-template-columns: 1fr;
gap: var(--spacing-2);
```

Tablet (2 columns):
```css
@media (min-width: 641px) {
  grid-template-columns: repeat(2, 1fr);
  gap: var(--spacing-3);
}
```

Desktop (3 columns):
```css
@media (min-width: 1025px) {
  grid-template-columns: repeat(3, 1fr);
  max-width: 1200px;
  margin: 0 auto;
}
```

### Responsive Utilities Application

Use Tailwind responsive modifiers throughout:
- `hidden md:block` - Hide on mobile, show on tablet+
- `block md:hidden` - Show on mobile, hide on tablet+
- `w-full md:w-64` - Full width mobile, fixed width tablet+
- `p-4 md:p-6` - Smaller padding mobile, larger tablet+
- `grid-cols-1 md:grid-cols-2 lg:grid-cols-3` - Column changes

## Effort
M (2-3 days)

## Definition of Done

- [x] `app/page.tsx` refactored with responsive layout
- [x] Layout responsive at all breakpoints (320px, 768px, 1024px+)
- [x] No horizontal scroll on mobile (100% width constraints)
- [x] Navigation accessible and functional on all devices
- [x] Bottom navigation visible only on mobile
- [x] Sidebar visible only on tablet/desktop
- [x] All interactive targets minimum 44x44px
- [x] Visual QA passed - no layout shifts or regressions
- [x] Smooth transitions between breakpoints (no jarring layout changes)

## Testing Checklist

### Responsive Testing
- [ ] Mobile (320px): Single column, bottom nav visible, sidebar hidden
- [ ] Mobile (480px): Same as 320px
- [ ] Tablet (641px): Drawer nav appears, bottom nav disappears
- [ ] Tablet (800px): 2-column layout verified
- [ ] Desktop (1025px): Persistent sidebar, bottom nav hidden
- [ ] Desktop (1440px): Content respects max-width, sidebar sticky
- [ ] Desktop (2560px): Ultra-wide display handles gracefully

### Functionality Testing
- [ ] Navigation between pages works on all breakpoints
- [ ] Bottom nav hidden/shown correctly with CSS media queries
- [ ] Sidebar drawer opens/closes smoothly
- [ ] Sticky header doesn't interfere with content
- [ ] Sticky bottom nav doesn't overlap content on mobile
- [ ] Scroll behavior smooth without jank

### Touch/UX Testing
- [ ] All buttons/nav items ≥44x44px on mobile
- [ ] Bottom nav items easy to tap (not cramped)
- [ ] Sidebar drawer toggle accessible on tablet
- [ ] No accidental scrolling into address bar on iOS

### Cross-Breakpoint Testing
- [ ] Transition from mobile to tablet layout (resize browser)
- [ ] Transition from tablet to desktop layout (resize browser)
- [ ] No layout "jump" when crossing breakpoints
- [ ] Content remains accessible during all transitions

## Dependencies

This task depends on:
- **Task 5 (Design System Foundation)** - Requires spacing tokens and utilities

This task conflicts with:
- **Task 7 (MusicPlayer Component Enhancement)** - Cannot refactor MusicPlayer until layout is finalized
- **Task 2 (TrackList Component Optimization)** - Cannot optimize TrackList until layout is set
- **Task 3 (SearchBar & Navigation UX)** - Cannot refactor SearchBar until navigation structure is defined

## Notes

- Mobile-first approach: start with mobile styles, add `md:` and `lg:` for larger screens
- Preserve existing navigation patterns but optimize for each breakpoint
- Leverage Tailwind responsive modifiers exclusively (no manual media queries if possible)
- Test frequently during development to catch layout regressions early
- This task blocks component refinement work (Tasks 7-3)
